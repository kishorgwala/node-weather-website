import React from 'react';
import { render, fireEvent } from '@testing-library/react';
import '@testing-library/jest-dom/extend-expect';
import EmeaRecommendation from './EmeaRecommendation';

describe('EmeaRecommendation', () => {
  it('renders without crashing', () => {
    render(<EmeaRecommendation />);
  });

  it('renders file type options properly', () => {
    const { getByLabelText } = render(<EmeaRecommendation />);
    const fileTypeMenu = getByLabelText('File Type');
    
    expect(fileTypeMenu).toBeInTheDocument();
    expect(fileTypeMenu).toHaveTextContent('Select');

    // Check if all file types are in the dropdown
    expect(fileTypeMenu).toHaveTextContent('SIX Telekurs Equity');
    expect(fileTypeMenu).toHaveTextContent('SIX Telekurs ETF');
    expect(fileTypeMenu).toHaveTextContent('SIX Telekurs Fixed Income');
    expect(fileTypeMenu).toHaveTextContent('Investment Navigator CH');
    expect(fileTypeMenu).toHaveTextContent('Investment Navigator CI');
    expect(fileTypeMenu).toHaveTextContent('Investment Navigator FR');
    expect(fileTypeMenu).toHaveTextContent('Investment Navigator LU');
    expect(fileTypeMenu).toHaveTextContent('Investment Navigator UK');
  });

  it('renders selected file type component correctly', () => {
    const { getByLabelText, getByText } = render(<EmeaRecommendation />);
    const fileTypeMenu = getByLabelText('File Type');

    fireEvent.change(fileTypeMenu, { target: { value: 'SIX_Tks_Equity' } });
    expect(getByText('DisplaySixTksEq')).toBeInTheDocument();

    fireEvent.change(fileTypeMenu, { target: { value: 'SIX_Tks_ETF' } });
    expect(getByText('DisplaySixTksEtf')).toBeInTheDocument();

    fireEvent.change(fileTypeMenu, { target: { value: 'SIX_Tks_Fixed_Income' } });
    expect(getByText('DisplaySixTksFi')).toBeInTheDocument();

    fireEvent.change(fileTypeMenu, { target: { value: 'IN_CH' } });
    expect(getByText('DisplayInvestmentNavCh')).toBeInTheDocument();

    fireEvent.change(fileTypeMenu, { target: { value: 'IN_CI' } });
    expect(getByText('DisplayInvestmentNavCi')).toBeInTheDocument();

    fireEvent.change(fileTypeMenu, { target: { value: 'IN_FR' } });
    expect(getByText('DisplayInvestmentNavFr')).toBeInTheDocument();

    fireEvent.change(fileTypeMenu, { target: { value: 'IN_LU' } });
    expect(getByText('DisplayInvestmentNavLu')).toBeInTheDocument();

    fireEvent.change(fileTypeMenu, { target: { value: 'IN_UK' } });
    expect(getByText('DisplayInvestmentNavUk')).toBeInTheDocument();
  });
});
